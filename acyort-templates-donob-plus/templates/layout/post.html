{% extends 'layout.html' %}

{% block title %}
{{ page.title }} - {{ config.title }}
{% endblock %}
{% block head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
{% endblock %}

{% block content %}
<div id="post" class="center">
  <p class="time">{{ _time(page.created, 'MMMM DD, YYYY') }}</p>
  <h1 class="title">{{ page.title }}</h1>
  <div class="content">{{ page.body }}</div>
  <div class="comments"><div id="gitalk-container"></div></div>
  <!-- <div class="comments"><div id="disqus_thread"></div></div> -->
</div>
{% endblock %}

{% block script %}
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
  const gitalkConfig = JSON.parse('{{ config.gitalk }}')
  var gitalk = new Gitalk({
    // clientID: '{{ config.gitalk.clientID }}',
    // clientSecret: '{{ config.gitalk.secret }}',
    // repo: '{{ config.gitalk.repo }}',
    // owner: '{{ config.gitalk.owner }}',
    // admin: ['{{config.gitalk.admin}}'],
    // number: {{page.number}},      // Ensure uniqueness and length less than 50
    // distractionFreeMode: false,  // Facebook-like distraction free mode
    // ...{{config.gitalk}}
    ...gitalkConfig
  })
  gitalk.render('gitalk-container')
</script>
{% endblock %}
